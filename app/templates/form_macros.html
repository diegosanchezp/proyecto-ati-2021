{% macro render_field(field, label=None, label_visible=true, right_url=None, right_label=None) -%}

  {% if field.type != 'HiddenField' and label_visible %}
    {% if not label %}{% set label=field.label.text %}{% endif %}
    <label for="{{ field.id }}" class="form-label">
      {{ label|safe }}
      {% if field.flags.required %}
        *
      {% endif %}
    </label>
  {% endif %}

  {# Render the input #}

  {% if field.type != "SelectField" %}
    {% set ariaAttr = [field.id, "Help"]|join("")  %}
    {% do kwargs.update({"aria-describedby": ariaAttr})  %}
    {{ field(
        class_='form-control',
        **kwargs
       )
    }}
  {% else %}
    {% do kwargs.update({"aria-label": field.id})  %}
    {{ field(
        class_='form-select',
        **kwargs
       )
    }}
  {% endif %}

  {# TODO: Use for errors
    https://getbootstrap.com/docs/5.0/forms/validation/#server-side
  #}

  {% if field.errors %}
    {% for e in field.errors %}
      <p class="help-block">{{ e }}</p>
    {% endfor %}
  {% endif %}
{%- endmacro %}
